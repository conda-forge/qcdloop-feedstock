From 675101a45cd6e6f9e656fe4041727c05070ff8ff Mon Sep 17 00:00:00 2001
From: Matthew Feickert <matthew.feickert@cern.ch>
Date: Sat, 21 Dec 2024 01:23:37 -0700
Subject: [PATCH] Don't use parameter expansion on CMAKE_SYSTEM_PROCESSOR

* Compare to a regex of aarch64 or arm(64).
---
 CMakeLists.txt | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/CMakeLists.txt b/CMakeLists.txt
index 5894c76..9e07556 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -68,7 +68,7 @@ configure_file(
   )
 # Only enable quadmath for non-aarch64 as aarch64 supports float128 and so
 # doesn't have libquadmath
-IF(NOT ${CMAKE_SYSTEM_PROCESSOR} MATCHES "aarch64")
+IF(NOT CMAKE_SYSTEM_PROCESSOR MATCHES "aarch64|^arm")
 set(QUADMATH_NAMES ${QUADMATH_NAMES} libquadmath.so quadmath)
 find_library(QUADMATH_LIBRARY
   NAMES ${QUADMATH_NAMES}
-- 
2.47.1

